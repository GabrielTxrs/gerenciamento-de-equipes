<h1 class="mt-4">Tela de Gerenciamento de Funcionários</h1>

<form [formGroup]="funcionarioForm">
    <div class="row">
        <div class="col mb-2">
            <label class="form-label">&ensp;Nome</label>
            <input class="form-control" formControlName="nome" placeholder="Fulano da Silva">
            @if (funcionarioForm.get('nome')?.invalid && funcionarioForm.get('nome')?.touched) {
            <div class="text-danger"> Nome é obrigatório. </div>
            }
        </div>

        <div class="col mb-2">
            <label class="form-label">&ensp;CPF</label>
            <input class="form-control" formControlName="cpf" placeholder="000.000.000-00" mask="000.000.000-00">
            @if (funcionarioForm.get('cpf')?.invalid && funcionarioForm.get('cpf')?.touched) {
            <div class="text-danger"> CPF é obrigatório e deve estar no formato 000.000.000-00. </div>
            }
        </div>
    </div>
    <div class="row">
        <div class="col">
            <label class="form-label">&ensp;Email</label>
            <input class="form-control" formControlName="email" placeholder="exemplo@email.com">
            @if (funcionarioForm.get('email')?.invalid && funcionarioForm.get('email')?.touched) {
            <div class="text-danger"> Email é obrigatório e deve ser válido. </div>
            }
        </div>

        <div class="col">
            <label class="form-label">&ensp;Senha</label>
            <input class="form-control" formControlName="senha" placeholder="**************">
            @if (funcionarioForm.get('senha')?.invalid && funcionarioForm.get('senha')?.touched) {
            <div class="text-danger"> Senha é obrigatória. </div>
            }
        </div>

        <div class="col">
            <label class="form-label">&ensp;Cargo</label>
            <input class="form-control" formControlName="cargo" placeholder="Cargo exemplo">
            @if (funcionarioForm.get('cargo')?.invalid && funcionarioForm.get('cargo')?.touched) {
            <div class="text-danger"> Cargo é obrigatório. </div>
            }
        </div>
    </div>
    <div class="p-3">
        <button type="submit" class="btn btn-primary" [disabled]="funcionarioForm.invalid"
        (click)="cadastrarFuncionario()">Cadastrar</button>
    </div>

    <table class="table table-striped mt-4">
        <thead>
            <tr>
                <th>Nome</th>
                <th>CPF</th>
                <th>Email</th>
                <th>Cargo</th>
                <th>Deletar</th>
            </tr>
        </thead>
        <tbody>

            @for(funcionario of funcionarios; track funcionario.idFuncionario) {
            <tr class="justify-content-center align-items-center">
                <td>{{ funcionario.nome }}</td>
                <td>{{ funcionario.cpf }}</td>
                <td>{{ funcionario.email }}</td>
                <td>{{ funcionario.cargo }}</td>
                <td>
                    <button class="btn btn-danger"
                        (click)="deleteFuncionario(funcionario.idFuncionario)">Deletar</button>
                </td>
            </tr>
            } @empty {
            <tr>
                <td>Não há funcionários cadastrados</td>
            </tr>
            }
        </tbody>
    </table>
</form>